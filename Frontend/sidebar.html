<html>

<head>   
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" /> 
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"></head>

<style>
	.smooth_sidemenu {
		position: relative;
		height: 0;
		overflow: hidden;
		display: block;
		transition-timing-function: ease;
		transition-duration: .25s;
		transition-property: height, visibility
	}
</style>
<script>
function loadContent(page) {
	fetch(page)
		.then(response => response.text())
		.then(html => {
			document.getElementById('mainContent').innerHTML = html;
			if (page === 'overview.html') {
				// Ensure Chart.js is loaded before overview.js
				function loadOverviewScript() {
					var oldScript = document.getElementById('overviewjs');
					if (oldScript) oldScript.remove();
					var script = document.createElement('script');
					script.src = './assets/js/overview.js';
					script.id = 'overviewjs';
					document.body.appendChild(script);
				}
				if (!window.Chart) {
					var chartScript = document.createElement('script');
					chartScript.src = './assets/js/chart.js';
					chartScript.onload = loadOverviewScript;
					document.body.appendChild(chartScript);
				} else {
					loadOverviewScript();
				}
			} else if (page === 'error_analysis.html') {
				// Load error_analysis.js after error_analysis.html is injected
				var oldScript = document.getElementById('erroranalysisjs');
				if (oldScript) oldScript.remove();
				var script = document.createElement('script');
				script.src = './assets/js/error_analysis.js';
				script.id = 'erroranalysisjs';
				script.onload = function() {
					if (window.showErrorAnalysisDefaultCard) window.showErrorAnalysisDefaultCard();
				};
				document.body.appendChild(script);

				// Inject chatbot assets only for Error Analysis
				injectChatbotAssets();
				// Ensure chatbot visible
				document.body.classList.add('show-chatbot');

			} else if (page === 'resolution.html') {
				// Load error_analysis.js after error_analysis.html is injected
				var oldScript = document.getElementById('resolutionjs');
				if (oldScript) oldScript.remove();
				var script = document.createElement('script');
				script.src = './assets/js/resolution.js';
				script.id = 'resolutionjs';
				script.onload = function() {
					if (window.initResolutionAssistant) window.initResolutionAssistant();
				};
				document.body.appendChild(script);

			} 
			else if (page === 'index.html') {
				// Load IDOC monitoring scripts
				var oldScript = document.getElementById('idocjs');
				if (oldScript) oldScript.remove();
				var script = document.createElement('script');
				script.src = './script.js';
				script.id = 'idocjs';
				document.body.appendChild(script);

				// Inject chatbot assets only for IDOC Monitoring
				injectChatbotAssets();
				// Ensure chatbot visible
				document.body.classList.add('show-chatbot');
			}

			// If other pages are loaded, hide chatbot and teardown any existing instance
			if (page !== 'index.html' && page !== 'error_analysis.html') {
				document.body.classList.remove('show-chatbot');
				// Call teardown if the chatbot script exposed it
				try { if (window.__chatbot_teardown) window.__chatbot_teardown(); } catch (e) {}
				// Also remove injected assets so they don't persist
				var oldCss = document.getElementById('chatbotcss'); if (oldCss) oldCss.remove();
				var oldJs = document.getElementById('chatbotjs'); if (oldJs) oldJs.remove();
				var oldFa = document.getElementById('fontawesomecss'); /* keep other FA uses if present */
			}

			// Helper: inject chatbot CSS + JS idempotently
			function injectChatbotAssets() {
				if (!document.getElementById('chatbotcss')) {
					var link = document.createElement('link');
					link.rel = 'stylesheet';
					link.href = './assets/css/chatbot.css';
					link.id = 'chatbotcss';
					document.head.appendChild(link);
				}

				// Ensure Font Awesome for icons
				if (!document.getElementById('fontawesomecss')) {
					var fa = document.createElement('link');
					fa.rel = 'stylesheet';
					fa.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css';
					fa.id = 'fontawesomecss';
					document.head.appendChild(fa);
				}

				// Load chatbot script (removing any previous instance)
				var oldChat = document.getElementById('chatbotjs');
				if (oldChat) oldChat.remove();
				var chatScript = document.createElement('script');
				chatScript.src = './assets/js/chatbot.js';
				chatScript.id = 'chatbotjs';
				document.body.appendChild(chatScript);
			}
			
		});
}
</script>

<body>


	<div class="app-sidebar sidebar-shadow" style="height: 110vh; max-width: 14rem;">
		<div class="app-header__logo">
			<div class="logo-src"></div>
			<div class="header__pane ml-auto">
				<div>
					<button id="closeSidebarBtn" type="button" class="hamburger hamburger--elastic mobile-toggle-nav"
						data-class="closed-sidebar">
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</button>
				</div>
			</div>
		</div>
		<div class="app-header__mobile-menu">
			<div>
				<button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
					<span class="hamburger-box">
						<span class="hamburger-inner"></span>
					</span>
				</button>
			</div>
		</div>
		<div class="app-header__menu">
			<span>
				<button type="button" class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
					<span class="btn-icon-wrapper">
						<i class="fa fa-ellipsis-v fa-w-6"></i>
					</span>
				</button>
			</span>
		</div>
		<!-- ) -->
		<div class="scrollbar-sidebar">
			<div class="app-sidebar__inner">
				<ul class="vertical-nav-menu">
					<!-- Organization Badge inside menu -->
					 <!-- <li class="app-sidebar__heading">
					<div id="organizationBadge" class="mb-3" style="display: block;">
						<div class="badge badge-primary p-2" style="font-size: 0.8rem; font-weight: 600; background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); border: none; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,123,255,0.3);">
							<i class="fas fa-building mr-2" style="font-size: 0.7rem;"></i>
							<span id="selectedOrganization">LTIMINDTREE</span>
						</div>
					</div>
					</li> -->
					<!-- <li class="app-sidebar__heading">Dashboard</li> -->
					<li>
						<a href="dashboard.html" class="main-menu" onclick="loadContent('overview.html')" style="margin-bottom: 10px; margin-top: 20px;">
							<i class="metismenu-icon fas fa-rocket"></i>
							Overview
						</a>
						

						<a href="#" class="main-menu" onclick="loadContent('index.html')" style="margin-bottom: 10px; margin-top: 20px;">
							<i class="metismenu-icon fas fa-wave-square"></i>
							IDOC Monitoring
						</a>
						<a href="#" class="main-menu" onclick="loadContent('error_analysis.html')" style="margin-bottom: 10px; margin-top: 20px;">
							<i class="metismenu-icon fas fa-bug"></i>
							Error Analysis
						</a>
						<a href="#" class="main-menu" onclick="loadContent('partner-drilldown.html')" style="margin-bottom: 10px; margin-top: 20px;">
							<i class="metismenu-icon fa-solid fa-network-wired"></i>
							Partner Drill Down
						</a>
						<a href="#" class="main-menu" onclick="loadContent('resolution.html')" style="margin-bottom: 10px; margin-top: 20px;">
							<i class="metismenu-icon fas fa-comments"></i>
							Resolution Assistant
						</a>
						

						</div>
					</li>
					
				</ul>
			</div>
		</div>
	</div>
</body>
<script>
	var link = document.createElement('link');
	link.href = "./assets/images/LTI_favicon.png";
	link.rel = "shortcut icon";
	document.getElementsByTagName('head')[0].appendChild(link);

	var title = document.createElement('title');
	title.innerHTML = "Profiler 3.0";
	document.getElementsByTagName('head')[0].appendChild(title);
</script>
<script type="text/javascript" src="./assets/scripts/main.js"></script>
<script type="text/javascript" src="./assets/resources/property.property"></script>

<script type="text/javascript" src="./assets/scripts/header.js"></script>


</html>